<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Parisienne&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <title>Nigel the coding Butler</title>
  <link rel="stylesheet" href="landingpage.css" />
  <link rel="icon" type="image/png"
    href="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/nigel-icon.png" />
</head>

<body>
  <div class="page">
    <section class="title-section">
      <div class="title-wrapper">
        <img id="nigelImg" class="nigel-img"
          src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/nigel.png"
          alt="Nigel, your coding butler" />
        <img id="nigelImgFront" class="nigel-img"
          src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/nigel.png"
          alt="Nigel, your coding butler (front overlay)" />
        <div class="title-inner">
          <div class="logo-container">
            <img
              src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/elevenlabs-logo-white.png">
            <span class="logo-divider">+</span>
            <img
              src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/webfuseLogo.svg">
          </div>
          <img class="nigel-logo"
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/nigel-icon.png"
            alt="Nigel logo" />
          <h1 class="hero-nigel"><img class="nigel-logo-inline"
              src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/nigel-icon.png"
              alt="Nigel logo" />Nigel <span id="the" class="hero-title">the</span></h1>
          <div class="hero-heading-text">
            <h1 class="hero-title"><span class="red">Coding</span> Butler</h1>
          </div>
        </div>
      </div>
      <div class="hero-info">
        <div class="icons">
          <div>
            <div class="icon-row">
              <i class="bi bi-eye icon-row__icon" aria-hidden="true"></i>
              <span class="icon-row__label">See</span>
            </div>
            <div class="icon-row">
              <i class="bi bi-cpu icon-row__icon" aria-hidden="true"></i>
              <span class="icon-row__label">Think</span>
            </div>
            <div class="icon-row">
              <i class="bi bi-hand-index icon-row__icon" aria-hidden="true"></i>
              <span class="icon-row__label">Act</span>
            </div>
          </div>
        </div>
        <p class="hero-desc">While other agents operate blindly, Nigel perceives
          your page in full and rewrites it with impeccable precision—injecting code to meet your every whim.<br><br>
          Command the web with <span class="red bigger">elegance</span>.</p>
      </div>


      <div class="button-container">
        <input class="input-box" type="text" value="www.wikipedia.org" placeholder="Enter a url, sir"
          aria-label="Nigel command" />
        <button class="start-btn" onclick="loadNigel()">
          <span class="start-btn__label">Call Nigel</span>
          <span class="bell-icon">
            <svg width="35" height="35" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
          </span>
        </button>

      </div>
    </section>
  </div>
  <div class="nigel-graphic">
    <!-- RIGHT: Slides container -->
    <section class="slides-column" aria-label="Demo slideshow">
      <div class="demo-reel">
        <div class="demo-stack">
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-1.gif"
            alt="Demo 1" class="demo-stack__item demo-stack__item--1" data-quote="Make the logo spin" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-2.gif"
            alt="Demo 2" class="demo-stack__item demo-stack__item--2" data-quote="Make my cursor a potato" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-3.gif"
            alt="Demo 3" class="demo-stack__item demo-stack__item--3" data-quote="Theme this page as outer space" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-4.gif"
            alt="Demo 4" class="demo-stack__item demo-stack__item--4" data-quote="Throw in some great text CSS" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-5.gif"
            alt="Demo 5" class="demo-stack__item demo-stack__item--5" data-quote="Create a rainy effect on the page" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-6.gif"
            alt="Demo 6" class="demo-stack__item demo-stack__item--6"
            data-quote="Take me to Google and make the logo dance" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-7.gif"
            alt="Demo 7" class="demo-stack__item demo-stack__item--7" data-quote="Make the glow on the moon red" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-8.gif"
            alt="Demo 8" class="demo-stack__item demo-stack__item--8"
            data-quote="I want to move it around with my arrow keys " />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-9.gif"
            alt="Demo 9" class="demo-stack__item demo-stack__item--9" data-quote="Make my cursor look like a horse" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-1.gif"
            alt="Demo 1" class="demo-stack__item demo-stack__item--1" data-quote="Make the logo spin" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-2.gif"
            alt="Demo 2" class="demo-stack__item demo-stack__item--2" data-quote="Make my cursor a potato" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-3.gif"
            alt="Demo 3" class="demo-stack__item demo-stack__item--3" data-quote="Theme this page as outer space" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-4.gif"
            alt="Demo 4" class="demo-stack__item demo-stack__item--4" data-quote="Throw in some great text CSS" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-5.gif"
            alt="Demo 5" class="demo-stack__item demo-stack__item--5" data-quote="Create a rainy effect on the page" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-6.gif"
            alt="Demo 6" class="demo-stack__item demo-stack__item--6"
            data-quote="Take me to Google and make the logo dance" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-7.gif"
            alt="Demo 7" class="demo-stack__item demo-stack__item--7" data-quote="Make the glow on the moon red" />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-8.gif"
            alt="Demo 8" class="demo-stack__item demo-stack__item--8"
            data-quote="I want to move it around with my arrow keys " />
          <img
            src="https://raw.githubusercontent.com/webfuse-com/nigel-butler-demo/refs/heads/main/LP/LP%20resources/demo-9.gif"
            alt="Demo 9" class="demo-stack__item demo-stack__item--9" data-quote="Make my cursor look like a horse" />
        </div>
      </div>
    </section>
  </div>
</body>
<script>
      let webfuseSession;
    (function (w, e, b, f, u, s) {
      w[f] = w[f] || {
        initSpace: function () {
          return new Promise(resolve => {
            w[f].q = arguments;
            w[f].resolve = resolve;
          });
        },
      };
      u = e.createElement(b);
      s = e.getElementsByTagName(b)[0];
      u.async = 1;
      u.src = 'https://webfu.se/surfly.js';
      s.parentNode.insertBefore(u, s);
    })(window, document, 'script', 'Webfuse');

    function loadNigel() {
      let defaultToWiki = null;
      const inputEl = document.querySelector('.input-box');
      let inputUrl = inputEl ? String(inputEl.value || '').trim() : '';

      // If empty, default to Wikipedia
      if (!inputUrl) {
        inputUrl = 'https://wikipedia.org';
      }

      // Ensure protocol is present
      if (inputUrl && !/^https?:\/\//i.test(inputUrl)) {
        inputUrl = `https://${inputUrl}`;
      }
      // Mobile/CTA visual feedback: switch to active styling + ring once
      const btn = document.querySelector('.start-btn');
      if (btn) {
        btn.classList.add('is-calling');
        const svg = btn.querySelector('.bell-icon svg');
        if (svg) {
          // restart animation reliably
          svg.classList.remove('ring-once');
          void svg.offsetWidth;
          svg.classList.add('ring-once');
          svg.addEventListener('animationend', () => svg.classList.remove('ring-once'), { once: true });
        }
      }
      webfuse.initSpace(
        '{{.WEBFUSE_WIDGET_KEY}}',
        '{{.WEBFUSE_SPACE_ID}}',
        {}
      )
        .then(async space => {
          console.log('Space loaded:', space);
          webfuseSession = space.session();

          webfuseSession.on("session_started", function (session, event) {
            webfuseSession.openTab(inputUrl);
          });

          // Start the session
          const response = await webfuseSession.start();
        })
        .catch(error => {
          console.error('Failed:', error);
        });
    }


    document.addEventListener('DOMContentLoaded', function () {
      const buttons = document.querySelectorAll('.start-btn');
      const inputs = document.querySelectorAll('.input-box');

      // Pressing Enter in the input triggers the same flow as clicking the button
      inputs.forEach(function (input) {
        input.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            loadNigel();
          }
        });
      });

      function enableStartButtons() {
        if (typeof window.loadNigel === 'function') {
          buttons.forEach(function (btn) {
            btn.classList.add('is-ready');
          });
          inputs.forEach(function (input) {
            input.classList.add('is-ready');
          });
          return true;
        }
        return false;
      }

      if (!enableStartButtons()) {
        const intervalId = setInterval(function () {
          if (enableStartButtons()) {
            clearInterval(intervalId);
          }
        }, 100);
      }
    });

    document.addEventListener('DOMContentLoaded', function () {
      const stackContainer = document.querySelector('.demo-stack');
      if (!stackContainer) return;

      const allCards = Array.from(stackContainer.querySelectorAll('.demo-stack__item'));
      if (allCards.length === 0) return;

      // Create overlay for enlarged image preview with quote
      const overlay = document.createElement('div');
      overlay.className = 'demo-overlay';


      const overlayContent = document.createElement('div');
      overlayContent.className = 'demo-overlay__content';

      const overlayImg = document.createElement('img');
      overlayImg.className = 'demo-overlay__img';

      const overlayQuote = document.createElement('p');
      overlayQuote.className = 'hero-quote demo-overlay__quote';

      const leftMark = document.createElement('span');
      leftMark.className = 'quote-mark';
      leftMark.textContent = '“';

      const quoteTextSpan = document.createElement('span');
      quoteTextSpan.className = 'quote-text';

      const rightMark = document.createElement('span');
      rightMark.className = 'quote-mark';
      rightMark.textContent = '”';

      overlayQuote.appendChild(leftMark);
      overlayQuote.appendChild(quoteTextSpan);
      overlayQuote.appendChild(rightMark);

      overlayContent.appendChild(overlayImg);
      overlayContent.appendChild(overlayQuote);
      overlay.appendChild(overlayContent);
      document.body.appendChild(overlay);

      const openPreview = (card, ev) => {
        if (ev) {
          ev.preventDefault();
          ev.stopPropagation();
        }
        const src = card.getAttribute('src');
        const quote = card.getAttribute('data-quote') || '';
        if (src) {
          overlayImg.setAttribute('src', src);
          quoteTextSpan.textContent = quote;
          overlay.classList.add('is-visible');
        }
      };

      // Prevent the "open" gesture from immediately triggering "close" on desktop.
      let ignoreCloseUntil = 0;

      // Wire up pointer + click behaviour so both tap and click open the preview
      allCards.forEach(card => {
        // Desktop: open on pointerup (a distinct click), not pointerdown
        card.addEventListener('pointerup', (ev) => {
          if (ev.pointerType !== 'touch') {
            openPreview(card, ev);
            ignoreCloseUntil = performance.now() + 250;
          }
        });

        // Fallback for browsers that only emit click reliably
        card.addEventListener('click', (ev) => {
          openPreview(card, ev);
          ignoreCloseUntil = performance.now() + 250;
        });

        // Mobile: open on touchstart for reliability on animated/transformed elements
        card.addEventListener('touchstart', (ev) => {
          openPreview(card, ev);
          ignoreCloseUntil = performance.now() + 350;
        }, { passive: false });
      });

      // Any tap/click in preview mode closes it
      const closeOverlay = (ev) => {
        // Ignore the release/click that immediately follows opening
        if (performance.now() < ignoreCloseUntil) return;
        ev.preventDefault();
        overlay.classList.remove('is-visible');
      };

      overlay.addEventListener('pointerup', closeOverlay);
      overlay.addEventListener('click', closeOverlay);
      overlay.addEventListener('touchstart', closeOverlay, { passive: false });

      // Preload all GIFs
      const preloadPromises = allCards.map(img => {
        if (img.complete) {
          return Promise.resolve();
        }
        return new Promise(resolve => {
          const done = () => {
            img.removeEventListener('load', done);
            img.removeEventListener('error', done);
            resolve();
          };
          img.addEventListener('load', done);
          img.addEventListener('error', done);
        });
      });

      Promise.all(preloadPromises).then(() => {
        // All GIFs preloaded; no drop-in animation needed.
      });
    });
</script>

</html>